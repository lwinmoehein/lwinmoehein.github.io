<html>

<head>
    <meta content="width=device-width, initial-scale=1,maximum-scale=1.0, user-scalable=no" name="viewport" />
    <link rel="stylesheet" href="all.min.css" />
    <link rel="stylesheet" href="app.css">
</head>

<body>
    <div id="loading-status-wrapper">
        <div class="fa-3x">
            <i class="fas fa-spinner fa-pulse"></i>
        </div>
    </div>

    <div id="content-wrapper" style="visibility: hidden;transition: visibility 0s, opacity 0.5s linear;opacity: 0">
        <div id="menu-bar-wrapper" class="menu-bar-wrapper">
            <div class="menu-bar">
                <i id="menu-open" class="fa-solid fa-bars"></i>
            </div>
        </div>
        <div id="drawer" class="drawer-menu-wrapper">
            <div class="button-wrapper">
                <i id="menu-close" class="fa-solid fa-xmark"></i>
            </div>
            <div class="drawer-menu">
                <div class="menu-grid">
                    <div class="mobile-nav-item nav active-nav">
                        <a href="#intro">Hola</a>
                    </div>
                    <div class="mobile-nav-item nav">
                        <a href="#education">Education</a>
                    </div>
                    <div class="mobile-nav-item nav">
                        <a href="#experience">Experience</a>
                    </div>
                    <div class="mobile-nav-item nav">
                        <a href="#personal">Projects</a>
                    </div>
                </div>
            </div>
        </div>
        <div id="body-wrapper" class="body-wrapper">
            <div class="nav-wrapper">
                <nav>
                    <div class="nav-item nav active-nav">
                        <a href="#intro">Hola</a>
                    </div>
                    <div class="nav-item nav">
                        <a href="#education">Education</a>
                    </div>
                    <div class="nav-item nav">
                        <a href="#experience">Experience</a>
                    </div>
                    <div class="nav-item nav">
                        <a href="#personal">Projects</a>
                    </div>
                </nav>
            </div>
            <div class="section-wrapper">
                <div id="scroller" class="go-down">
                    <i id="scroll-icon" class="fa-solid fa-arrow-down"></i>
                </div>
                <section id="intro" class="intro">
                    <img width="140px" height="140px" src="images/lwinmoehein.jpg" alt="Lwin Moe Hein ( Developer )">
                    <div class="about">
                        <h1>Lwin Moe Hein</h1>


                        <h6>Full Stack Developer</h6>
                        <p>I'm a Full Stack Developer mainly focused on <span class="color-text bold">Laravel</span>
                            Framework.I am confident to work with <span class="color-text bold">Javascript</span> and
                            PHP
                            langauges.</p>
                    </div>
                </section>
                <section id="education" class="education">
                    <h3>Education here</h3>
                </section>
                <section id="experience" class="experience">
                    <h3>Experience</h3>
                </section>
                <section id="personal" class="personal">
                    <h3>Personal Projects</h3>
                </section>
            </div>
        </div>
    </div>
    <script>
        'use strict'

        let menuOpen = document.querySelector('#menu-open')
        let menuClose = document.querySelector('#menu-close')
        let menuBar = document.querySelector('#menu-bar-wrapper')
        let drawer = document.querySelector('#drawer')
        let body = document.querySelector('#body-wrapper')
        let links = document.querySelectorAll('.mobile-nav-item')
        let loadingStatus = document.querySelector('#loading-status-wrapper')
        let mainContent = document.querySelector('#content-wrapper')
        let scroller = document.querySelector("#scroller")
        let scrollIcon = document.querySelector("#scroll-icon")
        let navItems = document.querySelectorAll('.nav')
        let sectionElements = document.querySelectorAll('section')

        let intro

        let personal = {
            href: "#personal",
            next: {
                href: "#intro",
                next: {
                    href: "#education",
                    next: {
                        href: "#experience",
                    }
                }
            }
        }


        let sections = [personal.next, personal.next.next, personal.next.next.next, personal]

        function onDrawerToggled(isClosed = true) {
            if (isClosed) {
                drawer.style.visibility = "hidden"
                drawer.style.opacity = 0
                menuBar.style.display = "block"
                body.style.display = "block"
            } else {
                drawer.style.visibility = "visible"
                drawer.style.opacity = 1
                menuBar.style.display = "none"
                body.style.display = "hidden"
            }
        }


        menuOpen.addEventListener("click", function () {
            onDrawerToggled(false)
        })


        menuClose.addEventListener("click", function () {
            onDrawerToggled(true)
        })

        links.forEach(link => {
            link.addEventListener("click", function () {
                onDrawerToggled(true)
            })
        })
        window.addEventListener("load", function () {
            loadingStatus.style.display = "none"
            mainContent.style.visibility = "visible"
            mainContent.style.opacity = "1"
        })

        scroller.addEventListener("click", function () {
            let currentLocation = sections.filter(s => s.href === location.hash || (location.hash == "" && s.href == "#intro"))[0]
            if (currentLocation.href == "#experience") {
                scrollIcon.classList.remove("fa-arrow-down")
                scrollIcon.classList.add("fa-arrow-up")
            } else {
                scrollIcon.classList.remove("fa-arrow-up")
                scrollIcon.classList.add("fa-arrow-down")
            }
            if (currentLocation === "#personal") {
                window.location.href = personal.next.href
                return;
            }
            window.location.href = currentLocation ? currentLocation.next ? currentLocation.next.href : "#personal" : "#personal"
        })
        //scrollbar timeout
        let scrollShowTimeout
        let hashUpdateTimeout
        document.addEventListener('scroll', function (e) {
            //update hash
            clearTimeout(hashUpdateTimeout)
            sectionElements.forEach(sec => {
                if (isInViewport(sec)) {
                    location.href = "#" + sec.id
                }
                console.log(isInViewport(sec))
            })
            scroller.style.display = "none"
            clearTimeout(scrollShowTimeout)
            scrollShowTimeout = setTimeout(() => {
                scroller.style.display = "flex"
            }, 1000)
        });

        //active link
        function locationHashChanged(e) {
            let matchedLink
            navItems.forEach(nav => {
                let linkElement = nav.lastElementChild
                if (linkElement.hash === location.hash) {
                    matchedLink = linkElement
                }
            })
            navItems.forEach(nav => {
                if (matchedLink.hash != nav.lastElementChild.hash) {
                    nav.classList.remove('active-nav')
                } else {
                    nav.classList.add('active-nav')
                }
            })
        }

        window.onhashchange = locationHashChanged;

        function isInViewport(element) {
            const rect = element.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }


    </script>
</body>

</html>